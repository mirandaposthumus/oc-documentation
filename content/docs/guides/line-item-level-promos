---
title: 'Line Item Level Promotions'
section: 'Guides'
---

import { Link } from 'gatsby'

## What are Line Item Level Promotions?

 - When `LineItemLevel = true` on a given promotion, that will serve as an indicator to the platform that the `Promotion.ValueExpression` should be evaluated independently against every line item on the order when the promotion is applied.
    - Once that value is calculated, the amount is saved in the DB, and displayed at the line item level under the new property `LineItem.PromotionDiscoun`t and is used to calculate the `LineItem.LineTotal`.
    - A new property `LineItem.LineSubtotal` was also introduced for displaying the pre-promotion discount price
 - The `Promotion.EligibleExpression` will still be evaluated against the entire order


## How are they different from Order Promotions?

 - Once applied, order promotion discounts are aggregated into one Order level field: `PromotionDiscount`
      - `Order.Total` is then calculated by summing `Order.Subtotal` (sum of `LinteItem.LineTotals`), `Order.TaxCost`, and `Order.ShippingCost` and then subtracting the `Order.PromotionDiscount`
 - These types of promotions will continue to work the exact same way they do currently. No changes are needed if you don’t want to use the new functionality.


##  When should Line Item Level Promotions be used?

 - When you need detailed information on how much of a promotion discount was applied to a given line item
 - One of the biggest limitations of Order level promotions is that there is no ability to determine which line items were eligible for the promotion and used to calculate the discount. This can lead to a few problems, including:
    - Not being able to charge the appropriate amount of tax for a discounted item. 
    - Not knowing how much to refund a customer who returns an item from an order where a promotion was used.


## Are there special requirements for Eligible and Value Expressions for these promotions?

 - There are no restrictions/changes on what is or isn’t allowed in the `EligibleExpression` for a promotion. You can setup a line item level promotion that evaluates on an order property, and vice versa.
 - There are a couple restrictions when it comes to `ValueExpression`
    - When `Promotion.LineItemLevel = true`, the `ValueExpression` must not contain any `order` or `items` statements or functions - only `item` statements can be used
    - When `Promotion.LineItemLevel = false`, the `ValueExpression` must not contain any `item` statements or functions


